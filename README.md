# Azure IOT C SDK and Protocol Gateway Replaceable TLSThis project to show how to replace SSL under TLS with an alternative protocol. Why might you want to do this? In the general case, you may have a small-footprint IOT device that wants to send telemetry to the cloud with no intermediaries (device to cloud) but do so securely. Traditionally that meant a field gateway.
Using this example you can implement your own security protcols as a TLS implementation under the Azure C IOT SDK (specifically the azuresharedutility code) communicating with the Azure Protocol Gateway (using a Channel Handler). Buyer beware; creating your own security layer (like SSL) is an exercise best left to experts. Existing implementations have been around for years and have been vetted with peer reviews. This example code was developed to assist a ISV partner with implementing their security protocols (as security experts). 
##Creating a client TLS layer for specialized encryption hardwareA more general use of this example code is to demonstrate how an IOT device manufacturer could create a TLS layer that executes security instructions (like AES) on a hardware security module (HSM). The default library uses OpenSSL, SSL on Windows or WolfSSL to accmplished encrypted communications. While that is possible, it may tax the memory and computational limits of a small-footprint IOT device. If your device has an onboard HSM you can use this example code to see how to make HSM specific API calls for encryption versu the software only libraries.
This repo ONLY contains the modified source files for the Azure C IOT SDK and is for demonstration only. The Azure IOT keys *were* real ones (re-generated now but kept originals in code to see what they would look like.). 
##Replication the project (getting it running)You will need several things to get the client communicating over the network to a locally running Azure Protocol Gateway. Some are optional (like Wireshark) but described and included in the flow for those and want to fully understand the interactions.
You will need:- A Fork of the Azure Shared Utility code with the DCM branch- A Fork of the Azure Protocol Gateway with the DCM branch- A Running Azure IOT HUb with at least one device created- Azure IOT Device Explorer- WireShark protocol analyzer with the NPCAP driver for capturing local loopback
You will need to do these things:- Modify your local hosts file (C:\Windows\SYstem32\drivers\etc\hosts) to point 127.0.0.1 to protocol-gateway.contoso.com
